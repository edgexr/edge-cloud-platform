# Copyright 2022 MobiledgeX, Inc
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

controllers:
- region: PA
orgs:
- name: FedAppCo
  type: developer
  address: 123 Maple Street, Gainesville, FL 32604
  phone: 123-123-1234
roles:
- org: FedAppCo
  username: feddev
  role: DeveloperManager
regiondata:
- region: PA
  appdata:
    flavors:
    - key:
        name: p1.large
      ram: 8192
      vcpus: 8
      disk: 8
    - key:
        name: p1.medium
      ram: 4096
      vcpus: 4
      disk: 4
    - key:
        name: p1.small
      ram: 2048
      vcpus: 2
      disk: 2
    - key:
        name: p1.tiny
      ram: 1024
      vcpus: 1
      disk: 1
    cloudlets:
    - key:
        organization: dmuus-partner1
        name: dmuuscloud1
        federatedorganization: partner1
      location:
        latitude: 31
        longitude: -91
      ipsupport: Dynamic
      numdynamicips: 10
      state: Ready
      platformtype: Federation
      infraflavors:
      - name: x1.small
        vcpus: 2
        ram: 4096
        disk: 40
      - name: x1.tiny
        vcpus: 1
        ram: 1024
        disk: 20
    - key:
        organization: dmuus-partner1
        name: dmuuscloud2
        federatedorganization: partner1
      location:
        latitude: 35
        longitude: -95
      ipsupport: Dynamic
      numdynamicips: 10
      state: Ready
      platformtype: Federation
      infraflavors:
      - name: x1.small
        vcpus: 2
        ram: 4096
        disk: 40
      - name: x1.tiny
        vcpus: 1
        ram: 1024
        disk: 20
    - key:
        organization: dmuus-partner1
        name: dmuuscloud3
        federatedorganization: partner1
      location:
        latitude: 32
        longitude: -92
      ipsupport: Dynamic
      numdynamicips: 10
      state: Ready
      platformtype: Federation
      infraflavors:
      - name: x1.small
        vcpus: 2
        ram: 4096
        disk: 40
      - name: x1.tiny
        vcpus: 1
        ram: 1024
        disk: 20
    - key:
        organization: dmuus-partner1
        name: dmuuscloud4
        federatedorganization: partner1
      location:
        latitude: 36
        longitude: -96
      ipsupport: Dynamic
      numdynamicips: 10
      state: Ready
      platformtype: Federation
      infraflavors:
      - name: x1.small
        vcpus: 2
        ram: 4096
        disk: 40
      - name: x1.tiny
        vcpus: 1
        ram: 1024
        disk: 20
    - key:
        organization: enterprise-partner1
        name: enterprise1
        federatedorganization: partner1
      location:
        latitude: 31
        longitude: -91
      ipsupport: Dynamic
      numdynamicips: 10
      state: Ready
      platformtype: Federation
      infraflavors:
      - name: x1.small
        vcpus: 2
        ram: 4096
        disk: 40
      - name: x1.tiny
        vcpus: 1
        ram: 1024
        disk: 20
    - key:
        organization: enterprise-partner1
        name: enterprise2
        federatedorganization: partner1
      location:
        latitude: 31
        longitude: -91
      ipsupport: Dynamic
      numdynamicips: 10
      state: Ready
      platformtype: Federation
      infraflavors:
      - name: x1.small
        vcpus: 2
        ram: 4096
        disk: 40
      - name: x1.tiny
        vcpus: 1
        ram: 1024
        disk: 20
    autoscalepolicies:
    - key:
        organization: FedAppCo
        name: scale1
      minnodes: 1
      maxnodes: 5
      stabilizationwindowsec: 2
      targetactiveconnections: 200
    apps:
    - key:
        organization: FedAppCo
        name: dockerapp
        version: "1.0"
      imagepath: registry.edgecloud.net/FedAppCo/dockerapp:1.0
      imagetype: Docker
      accessports: tcp:81,tcp:443,udp:10002
      defaultflavor:
        name: p1.tiny
      command: -text="hello world"
      deployment: docker
      accesstype: LoadBalancer
      globalid: pa-dockerapp10fedappco
    - key:
        organization: FedAppCo
        name: k8sapp
        version: "1.0"
      imagepath: registry.edgecloud.net/FedAppCo/k8sapp:1.0
      imagetype: Docker
      accessports: tcp:80,tcp:443,udp:10002
      defaultflavor:
        name: p1.tiny
      commandargs:
      - '"-text=\"hello world\""'
      deployment: kubernetes
      deploymentmanifest: |
        apiVersion: v1
        kind: Service
        metadata:
          name: k8sapp10-tcp
          labels:
            run: k8sapp1.0
        spec:
          type: LoadBalancer
          ports:
          - name: tcp80
            protocol: TCP
            port: 80
            targetPort: 80
          - name: tcp443
            protocol: TCP
            port: 443
            targetPort: 443
          selector:
            run: k8sapp1.0
        ---
        apiVersion: v1
        kind: Service
        metadata:
          name: k8sapp10-udp
          labels:
            run: k8sapp1.0
        spec:
          type: LoadBalancer
          ports:
          - name: udp10002
            protocol: UDP
            port: 10002
            targetPort: 10002
          selector:
            run: k8sapp1.0
        ---
        apiVersion: apps/v1
        kind: Deployment
        metadata:
          name: k8sapp10-deployment
        spec:
          replicas: 1
          selector:
            matchLabels:
              run: k8sapp1.0
          template:
            metadata:
              labels:
                run: k8sapp1.0
                mexDeployGen: kubernetes-basic
            spec:
              volumes:
              imagePullSecrets:
              - name: registry.edgecloud.net
              containers:
              - name: k8sapp10
                image: registry.edgecloud.net/FedAppCo/k8sapp:1.0
                imagePullPolicy: Always
                ports:
                - containerPort: 80
                  protocol: TCP
                - containerPort: 443
                  protocol: TCP
                - containerPort: 10002
                  protocol: UDP
                args:
                - "-text=\"hello world\""
      deploymentgenerator: kubernetes-basic
      accesstype: LoadBalancer
      serverlessconfig:
        vcpus: "0.5"
        ram: 20
      globalid: pa-k8sapp10fedappco
    - key:
        organization: FedAppCo
        name: vmapp
        version: "1.0"
      imagepath: https://registry.edgecloud.net/FedAppCo/vm.img#md5:2039483048230944325345245243524352345245
      imagetype: Qcow
      accessports: tcp:81
      defaultflavor:
        name: p1.small
      deployment: vm
      accesstype: LoadBalancer
      globalid: pa-vmapp10fedappco
    appinstances:
    - key:
        name: dockerapp
        organization: FedAppCo
        cloudletkey:
          organization: dmuus-partner1
          name: dmuuscloud1
          federatedorganization: partner1
      appkey:
        organization: FedAppCo
        name: dockerapp
        version: "1.0"
      clusterkey:
        name: reservable1
        organization: edgecloudorg
      cloudletloc:
        latitude: 31
        longitude: -91
      liveness: Static
      mappedports:
      - proto: Tcp
        internalport: 81
        publicport: 81
        fqdnprefix: shared.dmuus-cloud-1-dmuus.local.edgecloude2e.net
      - proto: Tcp
        internalport: 443
        publicport: 10000
        fqdnprefix: shared.dmuus-cloud-1-dmuus.local.edgecloude2e.net
      - proto: Udp
        internalport: 10002
        publicport: 10000
        fqdnprefix: shared.dmuus-cloud-1-dmuus.local.edgecloude2e.net
      flavor:
        name: p1.tiny
      cloudletflavor: x1.small
      state: Ready
      healthcheck: Ok
      powerstate: PowerOn
      vmflavor: x1.small
      uniqueid: fedappco-dockerapp-dmuuscloud1-dmuus-partner1
      dnslabel: dockerapp-fedappco
      fedkey:
        federationname: dmuus-partner1
        appinstid: '***replaced***'
    - key:
        name: k8sapp
        organization: FedAppCo
        cloudletkey:
          organization: dmuus-partner1
          name: dmuuscloud1
          federatedorganization: partner1
      appkey:
        organization: FedAppCo
        name: k8sapp
        version: "1.0"
      clusterkey:
        name: reservable0
        organization: edgecloudorg
      cloudletloc:
        latitude: 31
        longitude: -91
      liveness: Static
      mappedports:
      - proto: Tcp
        internalport: 80
        publicport: 80
        fqdnprefix: shared.dmuus-cloud-1-dmuus.local.edgecloude2e.net
      - proto: Tcp
        internalport: 443
        publicport: 443
        fqdnprefix: shared.dmuus-cloud-1-dmuus.local.edgecloude2e.net
      - proto: Udp
        internalport: 10002
        publicport: 10002
        fqdnprefix: shared.dmuus-cloud-1-dmuus.local.edgecloude2e.net
      flavor:
        name: p1.tiny
      state: Ready
      healthcheck: Ok
      powerstate: PowerOn
      vmflavor: x1.small
      uniqueid: fedappco-k8sapp-dmuuscloud1-dmuus-partner1
      dnslabel: k8sapp-fedappco
      fedkey:
        federationname: dmuus-partner1
        appinstid: '***replaced***'
    - key:
        name: vmapp
        organization: FedAppCo
        cloudletkey:
          organization: dmuus-partner1
          name: dmuuscloud2
          federatedorganization: partner1
      appkey:
        organization: FedAppCo
        name: vmapp
        version: "1.0"
      cloudletloc:
        latitude: 35
        longitude: -95
      liveness: Static
      mappedports:
      - proto: Tcp
        internalport: 81
        publicport: 81
        fqdnprefix: vmapp-dmuus-partner1.dmuus-cloud-2-dmuus.local.edgecloude2e.net
      flavor:
        name: p1.small
      state: Ready
      healthcheck: Ok
      powerstate: PowerOn
      vmflavor: x1.small
      uniqueid: fedappco-vmapp-dmuuscloud2-dmuus-partner1
      dnslabel: vmapp-fedappco
      fedkey:
        federationname: dmuus-partner1
        appinstid: '***replaced***'
    appinstrefs:
    - key:
        organization: FedAppCo
        name: dockerapp
        version: "1.0"
      insts:
        ? '{"name":"dockerapp","organization":"FedAppCo","cloudlet_key":{"organization":"dmuus-partner1","name":"dmuuscloud1","federated_organization":"partner1"}}'
        : 1
    - key:
        organization: FedAppCo
        name: k8sapp
        version: "1.0"
      insts:
        ? '{"name":"k8sapp","organization":"FedAppCo","cloudlet_key":{"organization":"dmuus-partner1","name":"dmuuscloud1","federated_organization":"partner1"}}'
        : 1
    - key:
        organization: FedAppCo
        name: vmapp
        version: "1.0"
      insts:
        ? '{"name":"vmapp","organization":"FedAppCo","cloudlet_key":{"organization":"dmuus-partner1","name":"dmuuscloud2","federated_organization":"partner1"}}'
        : 1
