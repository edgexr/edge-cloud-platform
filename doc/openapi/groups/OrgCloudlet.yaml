# Auto-generated doc: DO NOT EDIT
openapi: 3.0.3
info:
  description: Master Controller APIs for OrgCloudlets
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  title: OrgCloudlet APIs
  version: "2.0"
servers:
- description: localhost server
  url: http://localhost:9900
paths:
  /api/v1/auth/orgcloudlet/show:
    post:
      description: ""
      operationId: ShowOrgCloudlet
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiOrgCloudlet'
            x-required-fields:
            - region
            - org
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/EdgeprotoCloudlet'
                type: array
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: ShowOrgCloudlet
      tags:
      - OrgCloudlet
components:
  schemas:
    DmeProtoLoc:
      properties:
        altitude:
          description: On android only lat and long are guaranteed to be supplied
            Altitude in meters
          type: number
        course:
          description: Course (IOS) / bearing (Android) (degrees east relative to
            true north)
          type: number
        horizontal_accuracy:
          description: Horizontal accuracy (radius in meters)
          type: number
        latitude:
          description: Latitude in WGS 84 coordinates
          type: number
        longitude:
          description: Longitude in WGS 84 coordinates
          type: number
        speed:
          description: Speed (IOS) / velocity (Android) (meters/sec)
          type: number
        timestamp:
          $ref: '#/components/schemas/DmeProtoTimestamp'
        vertical_accuracy:
          description: Vertical accuracy (meters)
          type: number
      type: object
    DmeProtoMaintenanceState:
      type: integer
    DmeProtoTimestamp:
      properties:
        nanos:
          description: Added non-negative sub-second time in nanoseconds
          type: integer
        seconds:
          description: Time in seconds since epoch
          type: integer
      type: object
    EdgeprotoCloudlet:
      properties:
        HostController:
          description: Address of the controller hosting the cloudlet services if
            it is running locally
          type: string
        access_vars:
          additionalProperties:
            type: string
          description: Variables required to access cloudlet
          type: object
        alliance_orgs:
          description: This cloudlet will be treated as directly connected to these
            additional operator organizations for the purposes of FindCloudlet
          items:
            type: string
          type: array
        chef_client_key:
          additionalProperties:
            type: string
          description: Chef client key
          type: object
        config:
          $ref: '#/components/schemas/EdgeprotoPlatformConfig'
        container_version:
          description: Cloudlet container version
          type: string
        created_at:
          description: Created at time
          type: string
        crm_access_key_upgrade_required:
          description: CRM access key upgrade required
          type: boolean
        crm_access_public_key:
          description: CRM access public key
          type: string
        crm_override:
          description: Override actions to CRM
          type: string
        default_resource_alert_threshold:
          description: Default resource alert threshold percentage
          type: integer
        delete_prepare:
          description: Preparing to be deleted
          type: boolean
        deployment:
          description: Deployment type to bring up CRM services (docker, kubernetes)
          type: string
        deployment_local:
          description: Deploy cloudlet services locally
          type: boolean
        dns_label:
          description: DNS label that is unique within the region
          type: string
        enable_default_serverless_cluster:
          description: Enable experimental default multitenant (serverless) cluster
          type: boolean
        env_var:
          additionalProperties:
            type: string
          description: Single Key-Value pair of env var to be passed to CRM
          type: object
        errors:
          description: Any errors trying to create, update, or delete the Cloudlet.
          items:
            type: string
          type: array
        federation_config:
          $ref: '#/components/schemas/EdgeprotoFederationConfig'
        fields:
          description: Fields are used for the Update API to specify which fields
            to apply
          items:
            type: string
          type: array
        flavor:
          $ref: '#/components/schemas/EdgeprotoFlavorKey'
        gpu_config:
          $ref: '#/components/schemas/EdgeprotoGPUConfig'
        infra_api_access:
          description: Infra Access Type is the type of access available to Infra
            API Endpoint
          type: string
        infra_config:
          $ref: '#/components/schemas/EdgeprotoInfraConfig'
        ip_support:
          description: Type of IP support provided by Cloudlet (see IpSupport)
          type: string
        kafka_cluster:
          description: Operator provided kafka cluster endpoint to push events to
          type: string
        kafka_password:
          description: Password for kafka SASL/PLAIN authentification, stored securely
            in secret storage and never visible externally
          type: string
        kafka_user:
          description: Username for kafka SASL/PLAIN authentification, stored securely
            in secret storage and never visible externally
          type: string
        key:
          $ref: '#/components/schemas/EdgeprotoCloudletKey'
        license_config_storage_path:
          description: GPU driver license config storage path
          type: string
        location:
          $ref: '#/components/schemas/DmeProtoLoc'
        maintenance_state:
          $ref: '#/components/schemas/DmeProtoMaintenanceState'
        notify_srv_addr:
          description: Address for the CRM notify listener to run on
          type: string
        num_dynamic_ips:
          description: Number of dynamic IPs available for dynamic IP support
          type: integer
        override_policy_container_version:
          description: Override container version from policy file
          type: boolean
        physical_name:
          description: Physical infrastructure cloudlet name
          type: string
        platform_high_availability:
          description: Enable platform H/A
          type: boolean
        platform_type:
          description: Platform type
          type: string
        res_tag_map:
          additionalProperties:
            $ref: '#/components/schemas/EdgeprotoResTagTableKey'
          description: Optional resource to restagtbl key map key values = [gpu, nas,
            nic]
          type: object
        resource_quotas:
          description: Resource quotas
          items:
            $ref: '#/components/schemas/EdgeprotoResourceQuota'
          nullable: true
          type: array
        root_lb_fqdn:
          description: Root LB FQDN which is globally unique
          type: string
        secondary_crm_access_key_upgrade_required:
          description: CRM secondary access key upgrade required for H/A
          type: boolean
        secondary_crm_access_public_key:
          description: CRM secondary access public key for H/A
          type: string
        secondary_notify_srv_addr:
          description: Address for the secondary CRM notify listener to run on
          type: string
        single_kubernetes_cluster_owner:
          description: For single kubernetes cluster cloudlet platforms, cluster is
            owned by this organization instead of multi-tenant
          type: string
        state:
          description: Current state of the cloudlet
          type: string
        static_ips:
          description: List of static IPs for static IP support
          type: string
        time_limits:
          $ref: '#/components/schemas/EdgeprotoOperationTimeLimits'
        trust_policy:
          description: Optional Trust Policy
          type: string
        trust_policy_state:
          description: State of trust policy
          type: string
        updated_at:
          description: Updated at time
          type: string
        vm_image_version:
          description: EdgeCloud baseimage version where CRM services reside
          type: string
        vm_pool:
          description: VM Pool
          type: string
      type: object
    EdgeprotoCloudletKey:
      properties:
        federated_organization:
          description: Federated operator organization who shared this cloudlet
          type: string
        name:
          description: Name of the cloudlet
          type: string
        organization:
          description: Organization of the cloudlet site
          type: string
      type: object
    EdgeprotoFederationConfig:
      properties:
        federation_name:
          description: Federation name
          type: string
        partner_federation_addr:
          description: Partner federation address
          type: string
        partner_federation_id:
          description: Partner federation ID
          type: string
        self_federation_id:
          description: Self federation ID
          type: string
        zone_country_code:
          description: Cloudlet zone country code
          type: string
      type: object
    EdgeprotoFlavorKey:
      properties:
        name:
          description: Flavor name
          type: string
      type: object
    EdgeprotoGPUConfig:
      properties:
        driver:
          $ref: '#/components/schemas/EdgeprotoGPUDriverKey'
        license_config:
          description: Cloudlet specific license config to setup license (will be
            stored in secure storage)
          type: string
        license_config_md5sum:
          description: Cloudlet specific license config md5sum, to ensure integrity
            of license config
          type: string
        properties:
          additionalProperties:
            type: string
          description: Properties to identify specifics of GPU
          type: object
      type: object
    EdgeprotoGPUDriverKey:
      properties:
        name:
          description: Name of the driver
          type: string
        organization:
          description: Organization to which the driver belongs to
          type: string
      type: object
    EdgeprotoInfraConfig:
      properties:
        external_network_name:
          description: Infra specific external network name
          type: string
        flavor_name:
          description: Infra specific flavor name
          type: string
      type: object
    EdgeprotoOperationTimeLimits:
      properties:
        create_app_inst_timeout:
          description: Override default max time to create an app instance (duration)
          type: string
        create_cluster_inst_timeout:
          description: Override default max time to create a cluster instance (duration)
          type: string
        delete_app_inst_timeout:
          description: Override default max time to delete an app instance (duration)
          type: string
        delete_cluster_inst_timeout:
          description: Override default max time to delete a cluster instance (duration)
          type: string
        update_app_inst_timeout:
          description: Override default max time to update an app instance (duration)
          type: string
        update_cluster_inst_timeout:
          description: Override default max time to update a cluster instance (duration)
          type: string
      type: object
    EdgeprotoPlatformConfig:
      properties:
        access_api_addr:
          description: controller access API address
          type: string
        app_dns_root:
          description: App domain name root
          type: string
        cache_dir:
          description: cache dir
          type: string
        chef_client_interval:
          description: Chef client interval
          type: string
        chef_server_path:
          description: Path to Chef Server
          type: string
        cleanup_mode:
          description: Internal cleanup flag
          type: boolean
        cloudlet_vm_image_path:
          description: Path to platform base image
          type: string
        commercial_certs:
          description: Get certs from vault or generate your own for the root load
            balancer
          type: boolean
        container_registry_path:
          description: Path to Docker registry holding edge-cloud image
          type: string
        crm_access_private_key:
          description: crm access private key
          type: string
        deployment_tag:
          description: Deployment Tag
          type: string
        env_var:
          additionalProperties:
            type: string
          description: Environment variables
          type: object
        notify_ctrl_addrs:
          description: Address of controller notify port (can be multiple of these)
          type: string
        platform_tag:
          description: Tag of edge-cloud image
          type: string
        region:
          description: Region
          type: string
        secondary_crm_access_private_key:
          description: secondary crm access private key
          type: string
        span:
          description: Span string
          type: string
        test_mode:
          description: Internal Test flag
          type: boolean
        thanos_recv_addr:
          description: Thanos Receive remote write address
          type: string
        tls_ca_file:
          description: TLS ca file
          type: string
        tls_cert_file:
          description: TLS cert file
          type: string
        tls_key_file:
          description: TLS key file
          type: string
        use_vault_pki:
          description: Use Vault certs and CAs for internal TLS communication
          type: boolean
      type: object
    EdgeprotoResTagTableKey:
      properties:
        name:
          description: Resource Table Name
          type: string
        organization:
          description: Operator organization of the cloudlet site.
          type: string
      type: object
    EdgeprotoResourceQuota:
      properties:
        alert_threshold:
          description: Generate alert when more than threshold percentage of resource
            is used
          type: integer
        name:
          description: Resource name on which to set quota
          type: string
        value:
          description: Quota value of the resource
          minimum: 0
          type: integer
      type: object
    OrmapiOrgCloudlet:
      properties:
        org:
          description: Org that has permissions for cloudlets
          type: string
        region:
          description: Region name
          type: string
      type: object
    OrmapiResult:
      properties:
        code:
          description: Error code
          type: integer
        message:
          description: Informational message
          type: string
      type: object
  securitySchemes:
    bearerAuth:
      bearerFormat: JWT
      description: JWT token generated by the login API to be included in the http
        header
      scheme: bearer
      type: http
