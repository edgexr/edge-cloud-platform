# Auto-generated doc: DO NOT EDIT
openapi: 3.0.3
info:
  description: Master Controller APIs for FederationHosts
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  title: FederationHost APIs
  version: "2.0"
servers:
- description: localhost server
  url: http://localhost:9900
paths:
  /api/v1/auth/federation/provider/app/show:
    post:
      description: Show Apps onboarded by partner
      operationId: ShowHostApp
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderApp'
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/OrmapiProviderApp'
                type: array
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: ShowHostApp
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/app/unsafedelete:
    post:
      description: Delete App onboarded by partner, use only if partner cannot trigger
        delete themselves
      operationId: UnsafeDeleteHostApp
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderApp'
            x-required-fields:
            - federationname
            - appid
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: UnsafeDeleteHostApp
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/appinst/show:
    post:
      description: Show AppInsts onboarded by partner
      operationId: ShowHostAppInst
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderAppInst'
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/OrmapiProviderAppInst'
                type: array
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: ShowHostAppInst
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/appinst/unsafedelete:
    post:
      description: Delete AppInst created by partner, use only if partner cannot trigger
        delete themselves
      operationId: UnsafeDeleteHostAppInst
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderAppInst'
            x-required-fields:
            - federationname
            - appinstid
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: UnsafeDeleteHostAppInst
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/artefact/show:
    post:
      description: Show Artefacts created by partner
      operationId: ShowHostArtefact
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderArtefact'
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/OrmapiProviderArtefact'
                type: array
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: ShowHostArtefact
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/artefact/unsafedelete:
    post:
      description: Delete Artefact onboarded by partner, use only if partner cannot
        trigger delete themselves
      operationId: UnsafeDeleteHostArtefact
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderArtefact'
            x-required-fields:
            - federationname
            - artefactid
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: UnsafeDeleteHostArtefact
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/create:
    post:
      description: Create Federation Host
      operationId: CreateFederationHost
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiFederationProvider'
            x-required-fields:
            - name
            - operatorid
            - regions
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiFederationProviderInfo'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: CreateFederationHost
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/delete:
    post:
      description: Delete Federation Host
      operationId: DeleteFederationHost
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiFederationProvider'
            x-required-fields:
            - name
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: DeleteFederationHost
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/generateapikey:
    post:
      description: Generate Federation Host API Key to share with Guest
      operationId: GenerateFederationHostAPIKey
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiFederationProvider'
            x-required-fields:
            - name
            - operatorid
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiFederationProviderInfo'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: GenerateFederationHostAPIKey
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/image/show:
    post:
      description: Show Images uploaded by partner
      operationId: ShowHostImage
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderImage'
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/OrmapiProviderImage'
                type: array
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: ShowHostImage
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/image/unsafedelete:
    post:
      description: Delete Image onboarded by partner, use only if partner cannot trigger
        delete themselves
      operationId: UnsafeDeleteHostImage
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderImage'
            x-required-fields:
            - federationname
            - fileid
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: UnsafeDeleteHostImage
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/setnotifykey:
    post:
      description: Set Federation Host notify key for notify connections
      operationId: SetFederationHostNotifyKey
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiFederationProvider'
            x-required-fields:
            - name
            - operatorid
            - partnernotifyclientid
            - partnernotifyclientkey
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: SetFederationHostNotifyKey
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/show:
    post:
      description: Show Federation Host
      operationId: ShowFederationHost
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiFederationProvider'
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/OrmapiFederationProvider'
                type: array
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: ShowFederationHost
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/update:
    post:
      description: Update Federation Host
      operationId: UpdateFederationHost
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiFederationProvider'
            x-required-fields:
            - name
            - operatorid
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: UpdateFederationHost
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/zone/share:
    post:
      description: Share Host Zone with Partner OP
      operationId: ShareHostZone
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiFederatedZoneShareRequest'
            x-required-fields:
            - fedhost
            - zones
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: ShareHostZone
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/zone/show:
    post:
      description: Show Shared Host Zones
      operationId: ShowHostZone
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderZone'
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/OrmapiProviderZone'
                type: array
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: ShowHostZone
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/zone/unshare:
    post:
      description: Unshare Host Zone with Partner OP
      operationId: UnshareHostZone
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiFederatedZoneShareRequest'
            x-required-fields:
            - fedhost
            - zones
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: UnshareHostZone
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/zonebase/create:
    post:
      description: Create Host Zone Base to package cloudlets into a zone
      operationId: CreateHostZoneBase
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderZoneBase'
            x-required-fields:
            - zoneid
            - operatorid
            - region
            - cloudlets
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: CreateHostZoneBase
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/zonebase/delete:
    post:
      description: Delete Host Zone Base
      operationId: DeleteHostZoneBase
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderZoneBase'
            x-required-fields:
            - zoneid
            - operatorid
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: DeleteHostZoneBase
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/zonebase/show:
    post:
      description: Show Host Zone Bases
      operationId: ShowHostZoneBase
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderZoneBase'
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/OrmapiProviderZoneBase'
                type: array
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: ShowHostZoneBase
      tags:
      - FederationHost
  /api/v1/auth/federation/provider/zonebase/update:
    post:
      description: Update Host Zone Base
      operationId: UpdateHostZoneBase
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiProviderZoneBase'
            x-required-fields:
            - zoneid
            - operatorid
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: UpdateHostZoneBase
      tags:
      - FederationHost
components:
  schemas:
    OrmapiFederatedZoneShareRequest:
      properties:
        FedHost:
          description: Federation Host name
          type: string
        Zones:
          description: Self federator zones to be shared/unshared
          items:
            type: string
          nullable: true
          type: array
      type: object
    OrmapiFederationProvider:
      properties:
        CreatedAt:
          description: Time created
          format: date-time
          readOnly: true
          type: string
        DefaultContainerDeployment:
          description: Default container deployment type (either docker or kubernetes)
          type: string
        FederationContextId:
          description: The federation context id we generated for this federation
          type: string
        ID:
          description: Unique ID
          minimum: 0
          type: integer
        MyInfo:
          $ref: '#/components/schemas/OrmapiFederator'
        Name:
          description: Unique name of this federation Host, will be used as a developer
            org name for Guest OP's images and apps
          type: string
        OperatorId:
          description: Operator Organization that provides the resources
          type: string
        PartnerInfo:
          $ref: '#/components/schemas/OrmapiFederator'
        PartnerNotifyClientId:
          description: Partner notification client id
          type: string
        PartnerNotifyClientKey:
          description: Partner notification client key (saved in secret storage)
          type: string
        PartnerNotifyDest:
          description: Partner notification URI
          type: string
        PartnerNotifyTokenUrl:
          description: Partner Oauth token URI
          type: string
        ProviderClientId:
          description: Host client ID for inbound connections
          type: string
        Regions:
          $ref: '#/components/schemas/PqStringArray'
        Status:
          description: Status
          readOnly: true
          type: string
        UpdatedAt:
          description: Time updated
          format: date-time
          readOnly: true
          type: string
      type: object
    OrmapiFederationProviderInfo:
      properties:
        ClientId:
          description: Client ID for Oauth
          type: string
        ClientKey:
          description: Client Key for Oauth. Save this, as it the system cannot retrieve
            it.
          type: string
        TargetAddr:
          description: Target Address for EWBI create
          type: string
        TokenUrl:
          description: Oauth2 token URL
          type: string
      type: object
    OrmapiFederator:
      properties:
        CountryCode:
          description: ISO 3166-1 Alpha-2 code for the country where operator platform
            is located
          type: string
        DiscoveryEndPoint:
          description: IP and Port of discovery service URL of operator platform
          type: string
        FederationId:
          description: Globally unique string used to indentify a federation operator
          type: string
        FixedNetworkIds:
          $ref: '#/components/schemas/PqStringArray'
        InitialDate:
          description: Initial create time to denote time zone
          format: date-time
          type: string
        MCC:
          description: Mobile country code of operator sending the request
          type: string
        MNC:
          $ref: '#/components/schemas/PqStringArray'
      type: object
    OrmapiProviderApp:
      properties:
        AppID:
          description: App ID send by partner
          type: string
        AppName:
          description: App name of federation app (not region app)
          type: string
        AppProviderId:
          description: App provider ID
          type: string
        AppStatusCallbackLink:
          description: App status callback link
          type: string
        AppVers:
          description: App version  of federation app (not region app)
          type: string
        ArtefactIds:
          $ref: '#/components/schemas/PqStringArray'
        DeploymentZones:
          $ref: '#/components/schemas/PqStringArray'
        FederationName:
          description: Host Federation name
          type: string
      type: object
    OrmapiProviderAppInst:
      properties:
        AppID:
          description: AppID for ProviderApp
          type: string
        AppInstCallbackLink:
          description: AppInst callback link
          type: string
        AppInstID:
          description: AppInst unique ID
          type: string
        AppName:
          description: App name for AppInstKey
          type: string
        AppVers:
          description: App version for AppInstKey
          type: string
        Cloudlet:
          description: Cloudlet name for AppInstKey
          type: string
        CloudletFedOrg:
          description: Cloudlet federation org for AppInstKey (this should always
            be blank)
          type: string
        CloudletOrg:
          description: Cloudlet org for AppInstKey
          type: string
        Error:
          description: Error message if create failed
          type: string
        FederationName:
          description: Host Federation name
          type: string
        Region:
          description: Region for AppInst
          type: string
      type: object
    OrmapiProviderArtefact:
      properties:
        AppName:
          description: App name in region
          type: string
        AppProviderId:
          description: App provider ID
          type: string
        AppVers:
          description: App version in region
          type: string
        ArtefactID:
          description: Artefact ID send by partner
          type: string
        ArtefactName:
          description: Artefact name
          type: string
        ArtefactVersion:
          description: Artefact version
          type: string
        DescType:
          description: Descriptor Type
          type: string
        FederationName:
          description: Host Federation name
          type: string
        FileIds:
          $ref: '#/components/schemas/PqStringArray'
        VirtType:
          description: Virtualization Type
          type: string
      type: object
    OrmapiProviderImage:
      properties:
        AppProviderId:
          description: Partner app provider organization
          type: string
        Checksum:
          description: MD5 checksum for VM and file-based image types, sha256 digest
            for containers and Helm charts
          type: string
        Description:
          description: Image description
          type: string
        FederationName:
          description: Host federation name
          type: string
        FileID:
          description: File ID sent by partner
          type: string
        Name:
          description: Image name
          type: string
        Path:
          description: Image path
          type: string
        Status:
          description: Image status
          type: string
        Type:
          description: Image type (DOCKER, HELM, QCOW2, or OVA)
          type: string
        Version:
          description: Image version
          type: string
      type: object
    OrmapiProviderZone:
      properties:
        OperatorId:
          description: Host operator organization
          type: string
        PartnerNotifyZoneURI:
          description: Partner notify zone URI
          type: string
        ProviderName:
          description: Name of the Federation Host OP
          type: string
        Status:
          description: Zone status
          readOnly: true
          type: string
        ZoneId:
          description: Globally unique identifier of the federator zone
          type: string
      type: object
    OrmapiProviderZoneBase:
      properties:
        Cloudlets:
          $ref: '#/components/schemas/PqStringArray'
        CountryCode:
          description: ISO 3166-1 Alpha-2 code for the country where operator platform
            is located
          type: string
        GeoLocation:
          description: GPS co-ordinates associated with the zone (in decimal format)
          type: string
        GeographyDetails:
          description: Geography details
          type: string
        OperatorId:
          description: Operator organization
          type: string
        Region:
          description: Region in which cloudlets reside
          type: string
        ZoneId:
          description: Unique name for zone
          type: string
      type: object
    OrmapiResult:
      properties:
        code:
          description: Error code
          type: integer
        message:
          description: Informational message
          type: string
      type: object
    PqStringArray:
      items:
        type: string
      nullable: true
      type: array
  securitySchemes:
    bearerAuth:
      bearerFormat: JWT
      description: JWT token generated by the login API to be included in the http
        header
      scheme: bearer
      type: http
