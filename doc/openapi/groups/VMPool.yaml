# Auto-generated doc: DO NOT EDIT
openapi: 3.0.3
info:
  description: Master Controller APIs for VMPools
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  title: VMPool APIs
  version: "2.0"
servers:
- description: localhost server
  url: http://localhost:9900
paths:
  /api/v1/auth/ctrl/AddVMPoolMember:
    post:
      description: Add VMPoolMember. Adds a VM to existing VM Pool.
      operationId: AddVMPoolMember
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiRegionVMPoolMember'
            x-required-fields:
            - region
            - vmpoolmember.key.organization
            - vmpoolmember.key.name
            - vmpoolmember.vm.name
            - vmpoolmember.vm.netinfo.internalip
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EdgeprotoResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: AddVMPoolMember
      tags:
      - VMPool
  /api/v1/auth/ctrl/CreateVMPool:
    post:
      description: Create VMPool. Creates VM pool which will have VMs defined.
      operationId: CreateVMPool
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiRegionVMPool'
            x-required-fields:
            - region
            - vmpool.key.organization
            - vmpool.key.name
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EdgeprotoResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: CreateVMPool
      tags:
      - VMPool
  /api/v1/auth/ctrl/DeleteVMPool:
    post:
      description: Delete VMPool. Deletes VM pool given that none of VMs part of this
        pool is used.
      operationId: DeleteVMPool
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiRegionVMPool'
            x-required-fields:
            - region
            - vmpool.key.organization
            - vmpool.key.name
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EdgeprotoResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: DeleteVMPool
      tags:
      - VMPool
  /api/v1/auth/ctrl/RemoveVMPoolMember:
    post:
      description: Remove VMPoolMember. Removes a VM from existing VM Pool.
      operationId: RemoveVMPoolMember
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiRegionVMPoolMember'
            x-required-fields:
            - region
            - vmpoolmember.key.organization
            - vmpoolmember.key.name
            - vmpoolmember.vm.name
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EdgeprotoResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: RemoveVMPoolMember
      tags:
      - VMPool
  /api/v1/auth/ctrl/ShowVMPool:
    post:
      description: Show VMPools. Lists all the VMs part of the VM pool.
      operationId: ShowVMPool
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiRegionVMPool'
            x-required-fields:
            - region
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EdgeprotoVMPool'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: ShowVMPool
      tags:
      - VMPool
  /api/v1/auth/ctrl/UpdateVMPool:
    post:
      description: Update VMPool. Updates a VM pools VMs.
      operationId: UpdateVMPool
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrmapiRegionVMPool'
            x-required-fields:
            - region
            - vmpool.key.organization
            - vmpool.key.name
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EdgeprotoResult'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrmapiResult'
          description: Bad Request
        "403":
          description: Forbidden
      security:
      - bearerAuth: []
      summary: UpdateVMPool
      tags:
      - VMPool
components:
  schemas:
    EdgeprotoFlavorInfo:
      properties:
        disk:
          description: Amount of disk in GB on the Cloudlet
          minimum: 0
          type: integer
        name:
          description: Name of the flavor on the Cloudlet
          type: string
        prop_map:
          additionalProperties:
            type: string
          description: OS Flavor Properties, if any
          type: object
        ram:
          description: Ram in MB on the Cloudlet
          minimum: 0
          type: integer
        vcpus:
          description: Number of VCPU cores on the Cloudlet
          minimum: 0
          type: integer
      type: object
    EdgeprotoResult:
      properties:
        code:
          description: Error code, 0 indicates success, non-zero indicates failure
            (not implemented)
          type: integer
        message:
          description: Message, may be success or failure message
          type: string
      type: object
    EdgeprotoVM:
      properties:
        flavor:
          $ref: '#/components/schemas/EdgeprotoFlavorInfo'
        group_name:
          description: VM Group Name
          type: string
        internal_name:
          description: VM Internal Name
          type: string
        name:
          description: VM Name
          type: string
        net_info:
          $ref: '#/components/schemas/EdgeprotoVMNetInfo'
        state:
          description: VM State
          type: string
        updated_at:
          $ref: '#/components/schemas/TypesTimestamp'
      type: object
    EdgeprotoVMNetInfo:
      properties:
        external_ip:
          description: External IP
          type: string
        internal_ip:
          description: Internal IP
          type: string
      type: object
    EdgeprotoVMPool:
      properties:
        crm_override:
          description: Override actions to CRM
          type: string
        delete_prepare:
          description: Preparing to be deleted
          type: boolean
        errors:
          description: Any errors trying to add/remove VM to/from VM Pool
          items:
            type: string
          type: array
        key:
          $ref: '#/components/schemas/EdgeprotoVMPoolKey'
        state:
          description: Current state of the VM pool
          type: string
        vms:
          description: list of VMs to be part of VM pool
          items:
            $ref: '#/components/schemas/EdgeprotoVM'
          nullable: true
          type: array
      type: object
    EdgeprotoVMPoolKey:
      properties:
        name:
          description: Name of the vmpool
          type: string
        organization:
          description: Organization of the vmpool
          type: string
      type: object
    EdgeprotoVMPoolMember:
      properties:
        crm_override:
          description: Override actions to CRM
          type: string
        key:
          $ref: '#/components/schemas/EdgeprotoVMPoolKey'
        vm:
          $ref: '#/components/schemas/EdgeprotoVM'
      type: object
    OrmapiRegionVMPool:
      properties:
        Region:
          description: Region name
          type: string
        VMPool:
          $ref: '#/components/schemas/EdgeprotoVMPool'
      type: object
    OrmapiRegionVMPoolMember:
      properties:
        Region:
          description: Region name
          type: string
        VMPoolMember:
          $ref: '#/components/schemas/EdgeprotoVMPoolMember'
      type: object
    OrmapiResult:
      properties:
        code:
          description: Error code
          type: integer
        message:
          description: Informational message
          type: string
      type: object
    TypesTimestamp:
      properties:
        nanos:
          description: Non-negative fractions of a second at nanosecond resolution.
            Negative second values with fractions must still have non-negative nanos
            values that count forward in time. Must be from 0 to 999,999,999 inclusive.
          type: integer
        seconds:
          description: Represents seconds of UTC time since Unix epoch 1970-01-01T00:00:00Z.
            Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.
          type: integer
      type: object
  securitySchemes:
    bearerAuth:
      bearerFormat: JWT
      description: JWT token generated by the login API to be included in the http
        header
      scheme: bearer
      type: http
